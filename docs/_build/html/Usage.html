

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Downloading &mdash; IMDLIB  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Frequently Asked Questions" href="faq.html" />
    <link rel="prev" title="Description" href="Description.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> IMDLIB
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Description.html">Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="Description.html#installation">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Downloading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#output">Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#reading-imd-datasets">Reading IMD datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#processing">Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#plotting">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="#saving">Saving</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog History</a></li>
<li class="toctree-l1"><a class="reference internal" href="cf-conventions.html">CF conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IMDLIB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Downloading</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="downloading">
<h1>Downloading<a class="headerlink" href="#downloading" title="Permalink to this headline">¶</a></h1>
<p>IMDLIB is capable of downloading gridded rainfall and temperature (minimum and maximum) data. Here is an example of downloading rainfall data from 2010 to 2018:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">imdlib</span> <span class="k">as</span> <span class="nn">imd</span>

<span class="n">start_yr</span> <span class="o">=</span> <span class="mi">2010</span>
<span class="n">end_yr</span> <span class="o">=</span> <span class="mi">2018</span>
<span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;rain&#39;</span> <span class="c1"># other options are (&#39;tmin&#39;/ &#39;tmax&#39;)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">imd</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">start_yr</span><span class="p">,</span> <span class="n">end_yr</span><span class="p">,</span> <span class="n">fn_format</span><span class="o">=</span><span class="s1">&#39;yearwise&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Downloading: rain for year 2010
Downloading: rain for year 2011
Downloading: rain for year 2012
Downloading: rain for year 2013
Downloading: rain for year 2014
Downloading: rain for year 2015
Downloading: rain for year 2016
Downloading: rain for year 2017
Downloading: rain for year 2018
Download Successful !!!
</pre></div>
</div>
<p>The output is saved in the current working directory. If you want to save the files to a different directory, then you can use the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">imdlib</span> <span class="k">as</span> <span class="nn">imd</span>

<span class="n">start_yr</span> <span class="o">=</span> <span class="mi">2010</span>
<span class="n">end_yr</span> <span class="o">=</span> <span class="mi">2018</span>
<span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;rain&#39;</span> <span class="c1"># other options are (&#39;tmin&#39;/ &#39;tmax&#39;)</span>
<span class="n">file_dir</span> <span class="o">=</span> <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;C:\Users\imdlib\Desktop</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1">#Path to save the files</span>
<span class="n">imd</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">start_yr</span><span class="p">,</span> <span class="n">end_yr</span><span class="p">,</span> <span class="n">fn_format</span><span class="o">=</span><span class="s1">&#39;yearwise&#39;</span><span class="p">,</span> <span class="n">file_dir</span><span class="o">=</span><span class="n">file_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reading-imd-datasets">
<h1>Reading IMD datasets<a class="headerlink" href="#reading-imd-datasets" title="Permalink to this headline">¶</a></h1>
<p>One of the major purposes of IMDLIB is to process IMD’s gridded datasets. The original data is available in <code class="docutils literal notranslate"><span class="pre">grd</span></code> file format. IMDLIB can read <code class="docutils literal notranslate"><span class="pre">grd</span></code> file in <code class="docutils literal notranslate"><span class="pre">xarray</span></code> and will create an <code class="docutils literal notranslate"><span class="pre">IMD</span> <span class="pre">class</span> <span class="pre">object</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">imdlib</span> <span class="k">as</span> <span class="nn">imd</span>

<span class="n">start_yr</span> <span class="o">=</span> <span class="mi">2010</span>
<span class="n">end_yr</span> <span class="o">=</span> <span class="mi">2018</span>
<span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;rain&#39;</span> <span class="c1"># other options are (&#39;tmin&#39;/ &#39;tmax&#39;)</span>
<span class="n">file_dir</span> <span class="o">=</span> <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;C:\Users\imdlib\Desktop</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1">#Path to save the files</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">imd</span><span class="o">.</span><span class="n">open_data</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">start_yr</span><span class="p">,</span> <span class="n">end_yr</span><span class="p">,</span><span class="s1">&#39;yearwise&#39;</span><span class="p">,</span> <span class="n">file_dir</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>
</div>
<dl class="footnote brackets">
<dt class="label" id="id1"><span class="brackets">*</span></dt>
<dd><p>This step is for reading IMD datasets after they are downloaded. If you have the data already downloaded and stored locally, you can directly use this step to read the datasets.</p>
</dd>
</dl>
<div class="section" id="id2">
<h2>Output<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">&lt;imdlib.core.IMD</span> <span class="pre">at</span> <span class="pre">0x13e5b3753c8&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_dir</span></code> should refer to top-level directory. It should contain 3 sub-directories <code class="docutils literal notranslate"><span class="pre">rain</span></code>, <code class="docutils literal notranslate"><span class="pre">tmin</span></code>, and <code class="docutils literal notranslate"><span class="pre">tmax</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">file_dir</span></code> exists without any subdirectory, IMDLIB will look for the files in <code class="docutils literal notranslate"><span class="pre">file_dir</span></code>. But be careful if you are using <code class="docutils literal notranslate"><span class="pre">file_format</span> <span class="pre">=</span> <span class="pre">‘yearwise’</span></code>, as it will not differentiate between  the datasets, <code class="docutils literal notranslate"><span class="pre">2018.grd</span></code> for rainfall and <code class="docutils literal notranslate"><span class="pre">2018.grd</span></code> for tmin.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">file_dir</span></code> is not given, it will look for the adatasets from the current directory and its subdirectories.</p></li>
</ul>
</div>
</div>
<div class="section" id="processing">
<h1>Processing<a class="headerlink" href="#processing" title="Permalink to this headline">¶</a></h1>
<p>Getting the xarray object for further processing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_xarray</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="n">Dimensions</span><span class="p">:</span>  <span class="p">(</span><span class="n">lat</span><span class="p">:</span> <span class="mi">129</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="mi">135</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="mi">3287</span><span class="p">)</span>
<span class="n">Coordinates</span><span class="p">:</span>
<span class="o">*</span> <span class="n">lat</span>      <span class="p">(</span><span class="n">lat</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">6.5</span> <span class="mf">6.75</span> <span class="mf">7.0</span> <span class="mf">7.25</span> <span class="mf">7.5</span> <span class="o">...</span> <span class="mf">37.5</span> <span class="mf">37.75</span> <span class="mf">38.0</span> <span class="mf">38.25</span> <span class="mf">38.5</span>
<span class="o">*</span> <span class="n">lon</span>      <span class="p">(</span><span class="n">lon</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">66.5</span> <span class="mf">66.75</span> <span class="mf">67.0</span> <span class="mf">67.25</span> <span class="mf">67.5</span> <span class="o">...</span> <span class="mf">99.25</span> <span class="mf">99.5</span> <span class="mf">99.75</span> <span class="mf">100.0</span>
<span class="o">*</span> <span class="n">time</span>     <span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="n">datetime64</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">02</span> <span class="o">...</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">31</span>
<span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
    <span class="n">rain</span>     <span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span> <span class="n">float64</span> <span class="o">-</span><span class="mf">999.0</span> <span class="o">-</span><span class="mf">999.0</span> <span class="o">-</span><span class="mf">999.0</span> <span class="o">...</span> <span class="o">-</span><span class="mf">999.0</span> <span class="o">-</span><span class="mf">999.0</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">Conventions</span><span class="p">:</span>  <span class="n">CF</span><span class="o">-</span><span class="mf">1.7</span>
    <span class="n">title</span><span class="p">:</span>        <span class="n">IMD</span> <span class="n">gridded</span> <span class="n">data</span>
    <span class="n">source</span><span class="p">:</span>       <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">imdpune</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="ow">in</span><span class="o">/</span>
    <span class="n">history</span><span class="p">:</span>      <span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">08</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">43.519783</span> <span class="n">Python</span>
    <span class="n">references</span><span class="p">:</span>
    <span class="n">comment</span><span class="p">:</span>
    <span class="n">crs</span><span class="p">:</span>          <span class="n">epsg</span><span class="p">:</span><span class="mi">4326</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting">
<h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h1>
<p>Plotting can be done by:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;rain&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mf">999.</span><span class="p">)</span> <span class="c1">#Remove NaN values</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;rain&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/fig1.png"><img alt="_images/fig1.png" src="_images/fig1.png" style="width: 400px;" /></a>
</div>
<div class="section" id="saving">
<h1>Saving<a class="headerlink" href="#saving" title="Permalink to this headline">¶</a></h1>
<p>Get data for a given location, convert, and save into csv file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lat</span> <span class="o">=</span> <span class="mf">20.03</span>
<span class="n">lon</span> <span class="o">=</span> <span class="mf">77.23</span>
<span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">file_dir</span><span class="p">)</span>
</pre></div>
</div>
<p>Save data in netCDF format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s1">&#39;test.nc&#39;</span><span class="p">,</span> <span class="n">file_dir</span><span class="p">)</span>
</pre></div>
</div>
<p>Save data in GeoTIFF format (if you have rioxarray library):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">to_geotiff</span><span class="p">(</span><span class="s1">&#39;test.tif&#39;</span><span class="p">,</span> <span class="n">file_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Description.html" class="btn btn-neutral float-left" title="Description" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Saswata Nandi, Pratiman Patel and Sabyasachi Swain

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>